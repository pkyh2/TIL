# 이자율 매커니즘(돈키)

### 예치 이자율

해당 자산을 1년간 예치했을 때 받을 것으로 예상되는 
**예치 이자**(매 블록마다 원금 + 대출 이자가 다시 원금이 되는 복리 구조) + 해당 자산 1개를 1년간 예치했을 때 수령할 것으로 예상되는 **DON 보상(단리)**

ex) 0.1ETH를 예치했을 때

```python
# 예치 이자
def deposit(principal, interest):
    cnt = 0
    princiapl += (principal * interest)
    if cnt > 12:
        return principal
    else:
    	return deposit(principal, interest)
```

0.1ETH += (0.1ETH * 이자(변동금리)) -> 복리구조

+

DON 보상
0.1ETH를 1년간 예치했을 때 수령할 것으로 예상되는 DON보상(단리)

### 대출 이자율

해당 자산을 1년간 대출 받았을 때 지출할 것으로 예상되는 **대출 이자**(매 블록마다 원금 + 대출 이자가 다시 원금이 되는 복리 구조) + 해당 자산 1개를 1년간 대출 받았을 때 수령할 것으로 예상되는 **DON 보상(단리)**



### 이자율과 Operation Reserve

돈키의 예치이자율 = 대출이자율 - Operation Reserve(관리비)



## 이용률과 유동성 매커니즘

이용률은 현재 해당 자산의 예치 총액 대비 대출 총액

U(Utilization Ratio) = Borrow / Deposit

이용률이 낮은자산은 예치금은 많은데 대출금이 없어 예치자들이 이자를 못번다.

따라서 돈키에서는 다음과 같은 방식으로 이용률 알고리즘이 설계 되어 있다.

### 예치자의 입장

위에서 언급한 바와 같이 예치금 대비 대출금이 적으면 이용률이 낮아진다. 따라서 예치 이자가 줄어든다. 그러면 예치자들은 예치금을 이자가 높은 곳으로 옮긴다.
예치금이 줄어들었으니 이용률은 다시 높아지고, 대출 이자가 낮아지기 때문에 **프로토콜**에 의해 예치 풀이 줄어드는 위험을 막기 위해 대출 이자율이 높아진다.
그러면 예치 이자율도 자동으로 높아지기 때문에 다시 예치금이 높아질 수 있다.

이러한 이용률 알고리즘으로 예치 규모와 대출 규모를 조절하게 된다.

### 대출자의 입장

예치 규모는 그대로인데 대출 규모가 축소되면, 이용률이 낮아진다. 그러면 다시 이용률을 높이기 위해 대출이자를 낮춰 대출 규모를 늘리게 한다. 
대출에 따른 DON 보상도 있어 최종 이자율이 이상적으로 조정된다.

대출 규모가 높아져 이용률이 올라가면, 프로토콜에 의해 대출자가 내는 이자율도 점점 높아지기 때문에 예치자에게도 돌아가는 이자금이 올라간다.



## 예치자 보호를 위한 가산이자

돈키는 **예치 풀의 유동성을 보호하기 위해** 가산이자 알고리즘이 내장되어 있다.

가산이자는 **각 자산의 이용률이 특정 비율을 초과하는 순간**부터 적용돼 대출이자율을 급격히 높힌다.

현재 가산이자의 발동 조건은 모든 자산에 공통적으로 **80%**로 설정되어 있다.

ex) 2021년 9월 10일 pm4:30 시점 약 3,000만원 어치 HUNT를 빌리면





