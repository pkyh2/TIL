# Mastering Ethereum Ch1 ~ 4

## Chapter 1. 이더리움이란 무엇인가?

- 스마트 컨트랙트라는 프로그램을 실행하는 탈중앙화된 컴퓨팅 인프라 스트럭처

- 비트코인은 제한된 스크립트 언어를 사용 그러나 이더리움은 임의성과 무한 복잡성을 가진 코드를 실행할 수 있는 가상 머신을 운영하는 블록체인

- 이더리움 블록체인의 구성 요소

  1. p2p network

  2. consensus rule (Yellow Paper에 정리되어 있음)

  3. Transaction
     이더리움 트랜잭션은 보낸 사람, 받는 사람, 해시 값, 데이터 페이로드가 포함된 메시지

  4. 상태 머신
     이더리움 상태 전이는 바이트 코드를 실행하는 스택 기반 가상머신인 EVM에 의해 처리된다. 스마트 컨트랙트도 EVM프로그램 중 하나.

     - **EVM(Ethereum Virtual Machine)**

       솔리디티 코드가 컴파일되어 이더리움 바이트 코드가 만들어지고, 이 바이트 코드는 EVM이 실행한다.

       하나의 거대한 분산 컴퓨팅 구조

       누구나 EVM에 접근할 수 있는 거대 컴퓨터이며, 수많은 사용자가 변경하는 데이터의 충돌, 보안을 마이닝과 합의 알고리즘으로 해결한다.

       EVM을 사용하려면 수수료를 지불해야 한다. 그것이 바로 Gas(가스)다.

       트랜잭션을 생성한 주체가 트랜잭션 실행에 필요한 최대 Gas(Gas Limit)를 설정한다. Gas 비용은 채굴자들이 가져가기 때문에 Gas비용을 높게하면 우선적으로 트랜잭션을 처리하기도 한다.

       Gas Limit으로 설정한 Gas가 모두 소진되면 EVM은 해당 트랜잭션을 종료시킨다. 따라서 무한 Loop를 방지한다.

  5. 데이터 구조
     이더리움의 트랜잭션 및 시스템 상태는 머클 패트리샤 트리라고 하는 시리얼라이즈된 해시 데이터 구조이고, 각 노드의 데이터베이스에 저장됨.
     - 머클 패트리샤 트리(Merkle Patricia Tree)

  6. 합의 알고리즘
     작업증명(POW)을 사용해 중요도 가중치가 긴 체인을 결정 그러나 지분증명(POS) 가중투표 시스템인 캐스퍼로 전환할 계획

  7. 클라이언트
     게스(Go-Ethereum, geth)와 패리티(Parity)

     

## Chapter 2. 이더리움 기초

- 이더화폐
  이더(ether)이며, 'ETH'라고 쓴다.
  더 작은 단위로 세분화되는데 가장 작은 단위는 웨이(Wei)임.

  1이더(ether) = 10^18웨이(wei)

- 지갑
  이더리움 계정을 관리하는 소프트웨어 어플
  사용자의 키를 보유하고, 사용자를 대신하여 트랜잭션을 생성하고 브로드캐스트 하는 역할을 함.
  ex) 메타마스크, 잭스, 마이이더월렛, 에메랄드 지값
- 개인키 보안
  분실하면 복구할 방법이 없다. 관리 중요!
- 이더리움 네트워크
  메인넷과 여러개의 테스트넷이 존재
- 외부소유계정(EOA) 및 컨트랙트 계정
  지갑에서 생성한 계정의 유형을 외부소유계정(EOA)이라고 한다.
  컨트랙트 계정은 EOA가 가질 수 없는 스마트 컨트랙트 코드가 있고 개인키가 없다. 컨트랙트 계정은 스마트 컨트랙트 코드의 로직으로 제어한다. 컨트랙트 계정을 통해 컨트랙트와 이더를 주고 받을 수 있다.



